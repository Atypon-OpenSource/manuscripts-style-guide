#!/usr/bin/env node

const { execSync } = require('child_process')
const { name, version } = require('../package.json')
const process = require('process')

// const versions = execSync(`npm view ${process.env.NPM_REGISTRY ? '--registry ' + process.env.NPM_REGISTRY : ''} ${name} versions --json`, {
//  encoding: 'utf-8'
// })
const versions = '[]'

if (!JSON.parse(versions).includes(version)) {
  if (process.env.NPM_REGISTRY) {
    execSync(`npm publish --registry ${process.env.NPM_REGISTRY}`)
  } else {
    execSync('npm publish')
  }
}
